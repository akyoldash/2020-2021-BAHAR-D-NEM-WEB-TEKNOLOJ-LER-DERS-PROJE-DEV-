<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Ikon Kutuphanesi -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
      integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP"
      crossorigin="anonymous"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    />

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />

    <!-- Font -->
    <link
      href="https://fonts.googleapis.com/css?family=Lato|Open+Sans&display=swap"
      rel="stylesheet"
    />

    <!-- Css -->
    <link rel="stylesheet" href="style.css" />

    <title>Web Teknoloji Projesi</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
      <div class="container">
        <a href="anasayfa.html" class="navbar-brand text-white">
          Mazhar'ın Sayfası
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarMenu"
        >
          <span class="navbar-toggler-icon"></span>
          <i class="fas fa-bars"></i>
        </button>

        <div id="navbarMenu" class="collapse navbar-collapse">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a href="anasayfa.html" class="nav-link active text-white">
                Anasayfa
              </a>
            </li>

            <li class="nav-item">
              <a href="ozgecmis.html" class="nav-link active text-white">
                Özgeçmiş
              </a>
            </li>

            <li class="nav-item">
              <a href="ilgi_alanlarim.html" class="nav-link active text-white">
                İlgi Alanlarım
              </a>
            </li>

            <li class="nav-item">
              <a href="istanbul.html" class="nav-link active text-white">
                Şehrim
              </a>
            </li>

            <li class="nav-item">
              <a href="mirasimiz.html" class="nav-link active text-white">
                Mirasımız
              </a>
            </li>

            <li class="nav-item">
              <a href="iletisim.html" class="nav-link active text-white">
                İletişim
              </a>
            </li>

            <li class="nav-item">
              <a href="login.php" class="nav-link active text-white">
                <i class="fas fa-sign-in-alt"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid" style="margin-top: 80px">
      <h3>HOME</h3>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua.
      </p>
      <h1>Scroll this page to see the effect</h1>
    </div>

    <p><img class="responsive" src="https://image.tmdb.org/t/p/w500/gEU2QniE6E77NI6lCU6MxlNBvIx.jpg" alt="Interstellar"/></p>

    <script src="key.js"></script>
    <script>
      /*************
        SAMPLE URLS
        
        1. To get the config data like image base urls
        https://api.themoviedb.org/3/configuration?api_key=<APIKEY>
        
        2. To fetch a list of movies based on a keyword
        https://api.themoviedb.org/3/search/movie?api_key=<APIKEY>&query=<keyword>
        
        3. To fetch more details about a movie
        https://api.themoviedb.org/3/movie/<movie-id>?api_key=<APIKEY>
        *************/
      //const APIKEY is inside key.js
      let baseURL = "https://api.themoviedb.org/3/";
      let configData =
        "https://api.themoviedb.org/3/configuration?api_key=<f065d4671e22194c3bfb191f289dbbc0>";
      let baseImageURL =
        "https://api.themoviedb.org/3/search/movie?api_key=<f065d4671e22194c3bfb191f289dbbc0>&query=<interstellar>";

      let getConfig = function () {
        let url = "".concat(baseURL, "configuration?api_key=", APIKEY);
        fetch(url)
          .then((result) => {
            return result.json();
          })
          .then((data) => {
            baseImageURL = data.images.secure_base_url;
            configData = data.images;
            console.log("config:", data);
            console.log("config fetched");
            runSearch(keyword);
          })
          .catch(function (err) {
            alert(err);
          });
      };

      let runSearch = function (keyword) {
        let url = "".concat(
          baseURL,
          "search/movie?api_key=",
          APIKEY,
          "&query=",
          "interstellar"
        );
        fetch(url)
          .then((result) => result.json())
          .then((data) => {
            //process the returned data
            document.getElementById("output").innerHTML = JSON.stringify(
              data,
              null,
              4
            );
            //work with results array...
          });
      };
      //document.addEventListener('DOMContentLoaded', getConfig);
    </script>

    <footer class="py-5 bg-info text-white text-center">
      Web-Teknolojileri-Projesi © Mazhar Akyoldaş 2021
    </footer>

    <!-- BOOTSTRAP -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  </body>
</html>
